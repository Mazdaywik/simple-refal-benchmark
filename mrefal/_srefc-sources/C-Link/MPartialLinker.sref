$LABEL Compiler;
$LABEL ProgName;
$LABEL Prologue;
$LABEL Epilogue;
$LABEL Include;
$LABEL Define;
$LABEL OutputD_Exe;
$LABEL OutputD_Obj;
$LABEL Option;
$FORWARD CD_LinkP_MPartialLinkerP_CD_LinkD_Aux;
$LABEL StartCompilerCmdLine;
$FORWARD CD_LinkP_MPartialLinkerP_CreateOption;
$LABEL CompileOnlyOption;
$LABEL OutputObjectOption;
$LABEL ObjectExtension;
CD_LinkP_MPartialLinkerP_ProfilingD_CD_Link {
  (#Compiler (#ProgName e.ProgName )(#Prologue e.Prologue )(#Epilogue e.Epilogue ))(#Include e.IncludeInfo )(#Define e.DefineInfo )(#OutputD_Exe e.OutputInfo )(#OutputD_Obj (#Option e.OutputObject )(#Option e.Extension )(#Option e.CompileOnly ))e.FileNames =
    <CD_LinkP_MPartialLinkerP_CD_LinkD_Aux (#StartCompilerCmdLine e.ProgName ' ' e.Prologue ' ' <CD_LinkP_MPartialLinkerP_CreateOption e.IncludeInfo ><CD_LinkP_MPartialLinkerP_CreateOption e.DefineInfo >)(#Epilogue e.Epilogue )(#OutputD_Exe e.OutputInfo )(#CompileOnlyOption e.CompileOnly )(#OutputObjectOption e.OutputObject )(#ObjectExtension e.Extension )e.FileNames >;
}

CD_LinkP_MPartialLinkerP_CreateOption {
  (#Option e.Prefix )(e.NextValue )e.List =
    e.Prefix e.NextValue ' ' <CD_LinkP_MPartialLinkerP_CreateOption (#Option e.Prefix )e.List >;
  (#Option e.Prefix )=
    ;
}

$EXTERN MLambdaP_Map;
$EXTERN MLambdaP_BindLeft;
$FORWARD CD_LinkP_MPartialLinkerP_CompileFile;
$FORWARD CD_LinkP_MPartialLinkerP_LinkFiles;
CD_LinkP_MPartialLinkerP_CD_LinkD_Aux {
  (#StartCompilerCmdLine e.StartCompilerCmdLine )(#Epilogue e.Epilogue )(#OutputD_Exe (#Option e.ExeOpt )e.ExeName )(#CompileOnlyOption e.CompileOnlyOption )(#OutputObjectOption e.OutputObjectOption )(#ObjectExtension e.Extension )e.FileNames =
    <MLambdaP_Map <MLambdaP_BindLeft CD_LinkP_MPartialLinkerP_CompileFile (e.StartCompilerCmdLine )(e.Epilogue )(e.CompileOnlyOption )(e.OutputObjectOption )(e.Extension )>e.FileNames ><CD_LinkP_MPartialLinkerP_LinkFiles (e.StartCompilerCmdLine )(e.Epilogue )(e.ExeOpt )(e.ExeName )(e.Extension )e.FileNames >;
}

$FORWARD CD_LinkP_MPartialLinkerP_CompileFileD_FetchTimes;
$LABEL Source;
$LABEL Object;
$FORWARD CD_LinkP_MPartialLinkerP_ConstructObjectName;
CD_LinkP_MPartialLinkerP_CompileFile {
  (e.StartCompilerCmdLine )(e.Epilogue )(e.CompileOnlyOption )(e.OutputObjectOption )(e.Extension )(e.FileName )=
    <CD_LinkP_MPartialLinkerP_CompileFileD_FetchTimes (e.StartCompilerCmdLine e.CompileOnlyOption )(e.Epilogue )(e.OutputObjectOption )(#Source e.FileName )(#Object <CD_LinkP_MPartialLinkerP_ConstructObjectName (e.FileName )e.Extension >)>;
}

$FORWARD CD_LinkP_MPartialLinkerP_ConstructObjectNameD_Aux;
$EXTERN MFileSystemP_ParseFileName;
CD_LinkP_MPartialLinkerP_ConstructObjectName {
  (e.FileName )e.Extension =
    <CD_LinkP_MPartialLinkerP_ConstructObjectNameD_Aux (e.Extension )<MFileSystemP_ParseFileName e.FileName >>;
}

CD_LinkP_MPartialLinkerP_ConstructObjectNameD_Aux {
  (e.Extension )(e.Directory )e.Filename (e.Ext )=
    e.Directory e.Filename '.' e.Extension ;
}

$FORWARD CD_LinkP_MPartialLinkerP_CompileFileD_FetchTimesD_Aux;
$FORWARD CD_LinkP_MPartialLinkerP_FileTimeChanged;
CD_LinkP_MPartialLinkerP_CompileFileD_FetchTimes {
  (e.StartCompilerCmdLine )(e.Epilogue )(e.OutputObjectOption )(#Source e.Source )(#Object e.Object )=
    <CD_LinkP_MPartialLinkerP_CompileFileD_FetchTimesD_Aux (<CD_LinkP_MPartialLinkerP_FileTimeChanged e.Source >)(<CD_LinkP_MPartialLinkerP_FileTimeChanged e.Object >)e.StartCompilerCmdLine ' ' e.OutputObjectOption e.Object ' ' e.Source e.Epilogue >;
}

$EXTERN MFileSystemP_FileAttribute;
$LABEL DateTime;
CD_LinkP_MPartialLinkerP_FileTimeChanged {
  e.File =
    <MFileSystemP_FileAttribute #DateTime e.File >;
}

$LABEL FileNotFound;
$FORWARD CD_LinkP_MPartialLinkerP_Perform;
$FORWARD CD_LinkP_MPartialLinkerP_CompileFileD_CompareTimes;
$EXTERN MOrderP_Compare;
CD_LinkP_MPartialLinkerP_CompileFileD_FetchTimesD_Aux {
  (e.SourceTime )#FileNotFound e.CommandLine =
    <CD_LinkP_MPartialLinkerP_Perform e.CommandLine >;
  (e.SourceTime )(e.ObjectTime )e.CommandLine =
    <CD_LinkP_MPartialLinkerP_CompileFileD_CompareTimes <MOrderP_Compare (e.SourceTime )(e.ObjectTime )>e.CommandLine >;
}

CD_LinkP_MPartialLinkerP_CompileFileD_CompareTimes {
  '<' e.CommandLine =
    ;
  s.Other e.CommandLine =
    <CD_LinkP_MPartialLinkerP_Perform e.CommandLine >;
}

$EXTERN MOSP_System;
CD_LinkP_MPartialLinkerP_Perform {
  e.CommandLine =
    <MOSP_System e.CommandLine >;
}

$FORWARD CD_LinkP_MPartialLinkerP_ObjectForLinking;
CD_LinkP_MPartialLinkerP_LinkFiles {
  (e.StartCompilerCmdLine )(e.Epilogue )(e.ExeOpt )(e.ExeName )(e.Extension )e.FileNames =
    <CD_LinkP_MPartialLinkerP_Perform e.StartCompilerCmdLine e.ExeOpt e.ExeName ' ' <MLambdaP_Map <MLambdaP_BindLeft CD_LinkP_MPartialLinkerP_ObjectForLinking e.Extension >e.FileNames >e.Epilogue >;
}

CD_LinkP_MPartialLinkerP_ObjectForLinking {
  e.Extension (e.SourceName )=
    <CD_LinkP_MPartialLinkerP_ConstructObjectName (e.SourceName )e.Extension >' ' ;
}

$EXTERN MProfilerP_Quantify;
$ENTRY CD_LinkP_MPartialLinkerP_CD_Link {
  e.ManyOptions =
    <MProfilerP_Quantify CD_LinkP_MPartialLinkerP_ProfilingD_CD_Link e.ManyOptions >;
}

CD_LinkP_MPartialLinkerP_FinalizeE_ {
  =
    ;
}

$EXTERN RegisterE_;
$ENTRY CD_LinkP_MPartialLinkerP_EntryPointE_ {
  =
    <RegisterE_ CD_LinkP_MPartialLinkerP_FinalizeE_ >;
}

